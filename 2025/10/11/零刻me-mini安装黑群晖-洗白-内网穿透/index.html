<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="google-site-verification" content="1CCQhbF7dz1KBfjFkZ64PprrxO_9l2E3YOzcFdFseq4">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CNoto+Sans|Roboto|ZCOOL+QingKe+HuangYou:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"microxu.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="é›¶åˆ» Me mini Ubuntuç³»ç»Ÿ, Kingston NV3 M.2 NVMe SSD å®‰è£…é»‘ç¾¤æ™–ï¼Œæ´—ç™½ï¼Œå¹¶é…ç½®å¤–ç½‘è®¿é—®æ•™ç¨‹.">
<meta property="og:type" content="article">
<meta property="og:title" content="é›¶åˆ» Me miniå®‰è£…é»‘ç¾¤æ™–+æ´—ç™½+å†…ç½‘ç©¿é€">
<meta property="og:url" content="https://microxu.github.io/2025/10/11/%E9%9B%B6%E5%88%BBme-mini%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96-%E6%B4%97%E7%99%BD-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html">
<meta property="og:site_name" content="æ³›å½¼æŸèˆŸ">
<meta property="og:description" content="é›¶åˆ» Me mini Ubuntuç³»ç»Ÿ, Kingston NV3 M.2 NVMe SSD å®‰è£…é»‘ç¾¤æ™–ï¼Œæ´—ç™½ï¼Œå¹¶é…ç½®å¤–ç½‘è®¿é—®æ•™ç¨‹.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://microxu.github.io/images/nas/%E6%8F%92%E4%BB%B6%E9%80%89%E6%8B%A9.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/duckdns.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/%E8%AF%81%E4%B9%A6.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/portforwarding.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/dsm%E8%AF%81%E4%B9%A6%E9%80%89%E6%8B%A9.png">
<meta property="og:image" content="https://microxu.github.io/images/nas/%E8%AF%81%E4%B9%A6%E5%92%8C%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99.png">
<meta property="article:published_time" content="2025-10-10T21:22:03.000Z">
<meta property="article:modified_time" content="2025-10-12T07:58:08.560Z">
<meta property="article:author" content="Frank Xu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://microxu.github.io/images/nas/%E6%8F%92%E4%BB%B6%E9%80%89%E6%8B%A9.png">


<link rel="canonical" href="https://microxu.github.io/2025/10/11/%E9%9B%B6%E5%88%BBme-mini%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96-%E6%B4%97%E7%99%BD-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://microxu.github.io/2025/10/11/%E9%9B%B6%E5%88%BBme-mini%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96-%E6%B4%97%E7%99%BD-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","path":"2025/10/11/é›¶åˆ»me-miniå®‰è£…é»‘ç¾¤æ™–-æ´—ç™½-å†…ç½‘ç©¿é€/","title":"é›¶åˆ» Me miniå®‰è£…é»‘ç¾¤æ™–+æ´—ç™½+å†…ç½‘ç©¿é€"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>é›¶åˆ» Me miniå®‰è£…é»‘ç¾¤æ™–+æ´—ç™½+å†…ç½‘ç©¿é€ | æ³›å½¼æŸèˆŸ</title><meta name="robots" content="noindex">
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">æ³›å½¼æŸèˆŸ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-gallery"><a href="/gallery/" rel="section"><i class="fas fa-images fa-fw"></i>gallery</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96%EF%BC%9A"><span class="nav-number">1.</span> <span class="nav-text">1. å®‰è£…é»‘ç¾¤æ™–ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%85%B3%E4%BA%8E%E6%B4%97%E7%99%BD%EF%BC%9A"><span class="nav-number">2.</span> <span class="nav-text">2. å…³äºæ´—ç™½ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%85%B3%E4%BA%8E%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F"><span class="nav-number">3.</span> <span class="nav-text">3. å…³äºå†…ç½‘ç©¿é€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%EF%BC%9A"><span class="nav-number">4.</span> <span class="nav-text">4. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%A6%82%E4%BD%95%E7%BB%99%E5%9F%9F%E5%90%8D%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9HTTPS%E8%AF%81%E4%B9%A6%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%9C%A8%E8%AE%BF%E9%97%AE%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E6%B2%A1%E6%9C%89%E2%80%9C%E4%B8%8D%E5%AE%89%E5%85%A8%E8%BF%9E%E6%8E%A5%E2%80%9D%E5%B0%8F%E9%94%81%F0%9F%94%92%E4%BA%86%E3%80%82"><span class="nav-number">5.</span> <span class="nav-text">5. å¦‚ä½•ç»™åŸŸåç”³è¯·å…è´¹HTTPSè¯ä¹¦ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±æ²¡æœ‰â€œä¸å®‰å…¨è¿æ¥â€å°é”ğŸ”’äº†ã€‚</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AEDSM-%E5%92%8C-Synology-photo%E5%AD%90%E8%B7%AF%E5%BE%84%EF%BC%8C%E8%80%8C%E4%B8%8D%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%88%E6%AF%94%E5%A6%82%EF%BC%9Ahttps-frankxu-duckdns-org-photo-https-frankxu-duckdns-org%EF%BC%89%EF%BC%9A"><span class="nav-number">6.</span> <span class="nav-text">6. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®DSM å’Œ Synology photoå­è·¯å¾„ï¼Œè€Œä¸è¾“å…¥ç«¯å£å·ï¼ˆæ¯”å¦‚ï¼šhttps:&#x2F;&#x2F;frankxu.duckdns.org&#x2F;photo  https:&#x2F;&#x2F;frankxu.duckdns.orgï¼‰ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E9%87%8D%E5%90%AF%E5%90%8E-etc-nginx-nginx-conf-%E6%9B%B4%E6%96%B0%E8%A2%AB%E8%A6%86%E7%9B%96"><span class="nav-number">7.</span> <span class="nav-text">6. å¦‚ä½•é˜²æ­¢é‡å¯å&#x2F;etc&#x2F;nginx&#x2F;nginx.conf æ›´æ–°è¢«è¦†ç›–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E4%BD%86%E6%98%AF%E5%9C%A8%E6%89%8B%E6%9C%BAapp-DS-audio-%E9%87%8C%E9%9D%A2%E9%85%8D%E7%BD%AE%E7%9A%84%E6%97%B6%E5%80%99%E6%98%AF%E4%B8%8D%E6%94%AF%E6%8C%81-%E5%85%AC%E7%BD%91%E5%9F%9F%E5%90%8D-audio-%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%BB%B4"><span class="nav-number">8.</span> <span class="nav-text">6. ä½†æ˜¯åœ¨æ‰‹æœºapp DS audio é‡Œé¢é…ç½®çš„æ—¶å€™æ˜¯ä¸æ”¯æŒ å…¬ç½‘åŸŸå&#x2F;audio è¿™ç§æ–¹å¼æ»´</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Frank Xu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>


          <h3 style="font-size: 1.2em; font-weight: bold; margin-bottom: 15px; color: #b0c8c7; font-family: 'Caveat', cursive;">éšç¬”</h3>
          <!-- æŒ‰æ—¥æœŸä»å¤§åˆ°å°æ’åº -->
                  <div style="margin-bottom: 10px; line-height: 1.5; text-align: left; font-size: 0.8em;">
                    <span style="font-style: italic; margin-right: 5px;">
                      2024-09-09
                    </span> :
                    <span style="font-size: 0.9em; font-family: 'Lobster', cursive;">
                      <p>æœªæ¥æœ‰ä¸‰ä¸ªä¹°ä¹°ä¹°è®¡åˆ’ï¼šä¹°ä¸ªkayakï¼›ä¹°ä¸ªToyota Hiaceæ”¹æˆæˆ¿è½¦ï¼›å»è¶Ÿå—æï¼Œå½“ç„¶ä¸æ˜¯å¼€æˆ¿è½¦â€¦</p>
<!-- flag of hidden posts -->
                    </span>
                  </div>
                  <div style="margin-bottom: 10px; line-height: 1.5; text-align: left; font-size: 0.8em;">
                    <span style="font-style: italic; margin-right: 5px;">
                      2024-09-08
                    </span> :
                    <span style="font-size: 0.9em; font-family: 'Lobster', cursive;">
                      <p>çœ‹åˆ°0:7çš„æ¯”åˆ†ï¼Œæˆ‘ä¸€ç‚¹ä¹Ÿä¸å¥‡æ€ªï¼Œæ‰€æœ‰çš„æœéƒ½è·Ÿè®¤çŸ¥åŒ¹é…ï¼Œ5000å¹´ä¹Ÿæ²¡æœ‰æ–‡æ˜ï¼Œè¿˜æ˜¯ç‹¬è£å›½å®¶ï¼Œå·®è·åªä¼šè¶Šæ¥è¶Šå¤§â€¦</p>
<!-- flag of hidden posts -->
                    </span>
                  </div>
        </div>
      </div>

      <!-- <h3 style="font-size: 1.2em; font-weight: bold; margin-bottom: 15px; color: #b0c8c7; font-family: 'Caveat', cursive;">éšç¬”</h3> -->


    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://microxu.github.io/2025/10/11/%E9%9B%B6%E5%88%BBme-mini%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96-%E6%B4%97%E7%99%BD-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank Xu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ³›å½¼æŸèˆŸ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="é›¶åˆ» Me miniå®‰è£…é»‘ç¾¤æ™–+æ´—ç™½+å†…ç½‘ç©¿é€ | æ³›å½¼æŸèˆŸ">
      <meta itemprop="description" content="é›¶åˆ» Me mini Ubuntuç³»ç»Ÿ, Kingston NV3 M.2 NVMe SSD å®‰è£…é»‘ç¾¤æ™–ï¼Œæ´—ç™½ï¼Œå¹¶é…ç½®å¤–ç½‘è®¿é—®æ•™ç¨‹.">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          é›¶åˆ» Me miniå®‰è£…é»‘ç¾¤æ™–+æ´—ç™½+å†…ç½‘ç©¿é€
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-10-11 10:22:03" itemprop="dateCreated datePublished" datetime="2025-10-11T10:22:03+13:00">2025-10-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-10-12 20:58:08" itemprop="dateModified" datetime="2025-10-12T20:58:08+13:00">2025-10-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">é›¶åˆ» Me mini Ubuntuç³»ç»Ÿ, Kingston NV3 M.2 NVMe SSD å®‰è£…é»‘ç¾¤æ™–ï¼Œæ´—ç™½ï¼Œå¹¶é…ç½®å¤–ç½‘è®¿é—®æ•™ç¨‹.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="1-å®‰è£…é»‘ç¾¤æ™–ï¼š"><a href="#1-å®‰è£…é»‘ç¾¤æ™–ï¼š" class="headerlink" title="1. å®‰è£…é»‘ç¾¤æ™–ï¼š"></a>1. å®‰è£…é»‘ç¾¤æ™–ï¼š</h2><ul>
<li><p>å®‰è£…å¥½æ‰€æœ‰çš„SSDï¼Œæˆ‘å®‰è£…äº†6å— Kingston NV3 1TB M.2 NVMe Internal SSD</p>
</li>
<li><p>å®‰è£…é˜¶æ®µè¦æ¥ä¸ªå¤–æ¥æ˜¾ç¤ºå™¨ï¼Œè¿˜éœ€è¦æ¥ä¸ªé”®ç›˜</p>
</li>
</ul>
<blockquote>
<p>Note:<br>å¦‚æœä½ ä¹‹å‰å®‰è£…è¿‡å¾ˆå¤šæ¬¡ï¼Œå¹¶å¤±è´¥äº†ï¼Œæ‰çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œéœ€è¦å…ˆè¿›meminiçš„é»˜è®¤ç³»ç»Ÿï¼ˆæˆ‘çš„Ubuntuç³»ç»Ÿï¼‰ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ŒæŠŠè¿™äº›ç£ç›˜é‡æ–°resetï¼Œæ¥å»é™¤ä»¥å‰çš„å®‰è£…æ®‹ç•™ã€‚<br>è¿›å…¥Ubuntuç³»ç»Ÿçš„ç»ˆç«¯è½¯ä»¶ï¼š</p>
<ul>
<li><ol>
<li>åœæ‰å¹¶åˆ é™¤æ—§çš„ md é˜µåˆ—<br><code>mdadm --stop --scan</code><br><code>mdadm --zero-superblock /dev/nvme0n1 /dev/nvme1n1 /dev/nvme2n1 /dev/nvme3n1 /dev/nvme4n1 /dev/nvme5n1 2&gt;/dev/null</code></li>
</ol>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><ol start="2">
<li>åˆ é™¤æ¯å—ç›˜çš„åˆ†åŒºè¡¨ï¼ˆä»… NVMeï¼Œä¸åŠ¨ U ç›˜ï¼‰<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;for i in /dev/nvme[0-5]n1; do</span><br><span class="line"> echo &quot;Cleaning $i&quot;</span><br><span class="line"> dd if=/dev/zero of=$i bs=1M count=20</span><br><span class="line">&gt;done</span><br><span class="line">&gt;sync</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43331089/article/details/148173641">æŒ‰ç…§è¿™ä¸ªæ–‡æ¡£çš„å†…å®¹</a> ,å…ˆåšä¸ªå¯åŠ¨ç›˜ï¼Œå…¶å®ƒå†…å®¹ä¹Ÿå¯ä»¥é¡ºä¾¿åšå‚è€ƒ</p>
</blockquote>
<ul>
<li><p>ç„¶åæ’å…¥å¯åŠ¨ç›˜</p>
</li>
<li><p>å¯åŠ¨çš„æ—¶å€™æŒ‰ESC è¿›Biosï¼ˆå¯åŠ¨çš„æ—¶å€™æŒ‰F7å¯ä»¥é€‰æ‹©å¯åŠ¨ç›˜ï¼‰ï¼š<br><strong>åœ¨UEFI Hard Disk Drive BBS prioritiesä¸­</strong><br>ç¬¬ä¸€å¯åŠ¨é¡¹è®¾ç½®æˆï¼šUEFI OS (SanDisk Cruzer)<br>ç¬¬äºŒå¯åŠ¨é¡¹ï¼šUbuntu</p>
</li>
</ul>
<ul>
<li><p>me mini æˆ‘é€‰æ‹©ä½¿ç”¨ SA6400 ç³»ç»Ÿï¼Œå®‰è£…æ˜¯æˆåŠŸçš„</p>
</li>
<li><p>æˆ‘çš„SSD æ˜¯ Kingston NV3 1TB M.2 NVMe Internal SSD ,æ‰€ä»¥éœ€è¦é¢å¤–é€‰æ‹©å¦‚ä¸‹æ’ä»¶ï¼š<br><img src="/images/nas/%E6%8F%92%E4%BB%B6%E9%80%89%E6%8B%A9.png" alt="æ’ä»¶é€‰æ‹©"></p>
</li>
<li><p>å¯¹äºé›¶åˆ»me miniï¼ŒAdvanced option ä¸­éœ€è¦æ£€æŸ¥å¦‚ä¸‹ä¸‰é¡¹çš„å€¼æ˜¯å¦æ˜¯å¯¹åº”çš„å€¼ï¼Œ å¦‚æœä¸æ˜¯å¯ä»¥æŒ‰å›è½¦ä¿®æ”¹ï¼š<br><em>LKM version: prod</em><br><em>Switch direct boot : true</em><br><em>Use EMMC as the system disk : false</em></p>
</li>
</ul>
<p>å…¶å®ƒæŒ‰ç…§ä¸Šé¢çš„æ–‡æ¡£åšå°±å¯ä»¥ã€‚</p>
<h2 id="2-å…³äºæ´—ç™½ï¼š"><a href="#2-å…³äºæ´—ç™½ï¼š" class="headerlink" title="2. å…³äºæ´—ç™½ï¼š"></a>2. å…³äºæ´—ç™½ï¼š</h2><ul>
<li><p>å¦‚æœæœ‰æ·˜å®ä¹°çš„æ´—ç™½ç ï¼ˆ10å…ƒä»¥å†…ï¼‰ï¼Œå¯ä»¥è¿™ä¸ªæ—¶å€™é€‰æ‹©Cmdline menu, ç„¶åè¾“å…¥è‡ªå·±çš„SNå’Œä¸¤ä¸ªMACï¼Œå½“ç„¶å®‰è£…å®Œæˆä¹‹åå†å»è¾“å…¥ä¹Ÿè¡Œã€‚</p>
</li>
<li><p>å¦‚æœæƒ³è®©Advanced Media Extensions å¥—ä»¶æ”¯æŒAVC å’Œ VC1 è§£ç ï¼Œè¯·çœ‹å¦‚ä¸‹èµ„æºï¼š</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=yZYgjiPJmoA">æ´—ç™½æ•™ç¨‹</a></p>
</blockquote>
</li>
</ul>
<p><em>ä»è¿™ä¹‹åï¼Œå°±ä½ çš„é›¶åˆ»me mini nas å°±å¯ä»¥ä¸ç”¨æ¥æ˜¾ç¤ºå™¨å’Œé”®ç›˜äº†ï¼Œç”¨ç”µè„‘ç™»é™†ç¾¤æ™–ç®¡ç†é¡µé¢å°±å¯ä»¥äº†</em></p>
<h2 id="3-å…³äºå†…ç½‘ç©¿é€"><a href="#3-å…³äºå†…ç½‘ç©¿é€" class="headerlink" title="3. å…³äºå†…ç½‘ç©¿é€"></a>3. å…³äºå†…ç½‘ç©¿é€</h2><p>æ‰€è°“å†…ç½‘ç©¿é€ï¼Œä¹Ÿå°±æ˜¯è®©å¤–éƒ¨ï¼ˆäº’è”ç½‘ï¼‰èƒ½å¤Ÿè®¿é—®åˆ°ä½äºå†…ç½‘ä¸­çš„æœåŠ¡æˆ–è®¾å¤‡çš„ä¸€ç§æŠ€æœ¯æ‰‹æ®µã€‚</p>
<ul>
<li><p>è®¿é—® <a target="_blank" rel="noopener" href="https://test-ipv6.com/">https://test-ipv6.com</a> æ¥çœ‹çœ‹æ˜¯æœ‰ipv6 è¿˜æ˜¯ ipv4ï¼Œæˆ‘åªæœ‰å…¬ç½‘ipv4</p>
</li>
<li><p>åœ¨è·¯ç”±å™¨è®¾ç½®ç«¯å£è½¬å‘ï¼Œä¹Ÿå°±æ˜¯DSM 5001 çš„ç«¯å£è¯·æ±‚è½¬å‘åˆ°memini(192.168.1.29)çš„5001 å¤„ç†<br>æˆ‘ç”¨çš„Orbiè·¯ç”±å™¨ï¼š</p>
</li>
</ul>
<ol>
<li>è®¿é—® <a target="_blank" rel="noopener" href="http://192.168.1.1/">http://192.168.1.1</a> â†’ Advanced â†’ Advanced Setup â†’ Port Forwarding&#x2F;Port Triggering â†’ Add Custom Service</li>
</ol>
<p><img src="/images/nas/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91.png" alt="ç«¯å£è½¬å‘"></p>
<p>è¿™ä¸ªæ—¶å€™ä¼šåˆ—å‡ºæ‰€æœ‰å†…éƒ¨åœ¨çº¿è®¾å¤‡åè®©ä½ é€‰æ‹©ï¼Œmeminiå°±æ˜¯é›¶åˆ»nasã€‚</p>
<ol start="2">
<li>æ·»åŠ è§„åˆ™ï¼š<br>Service Name: DSM<br>External Port: 5001<br>Internal IP: (ä½ çš„ NAS å†…ç½‘ IPï¼Œæ¯”å¦‚ 192.168.1.29)<br>Internal Port: 5001<br>Protocol: TCP</li>
</ol>
<p>å®Œæˆåï¼Œå°±å¯ä»¥ç”¨ https:&#x2F;&#x2F;&lt;ä½ çš„å…¬ç½‘IPv4&gt;:5001 æ¥è®¿é—®ä½ çš„ç¾¤æ™–ç™»å½•é¡µé¢äº†ã€‚</p>
<h2 id="4-å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®ï¼š"><a href="#4-å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®ï¼š" class="headerlink" title="4. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®ï¼š"></a>4. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®ï¼š</h2><ol>
<li><p>åœ¨DuckDNSä¸­ç”³è¯·å…è´¹åŸŸåï¼ˆå¦‚æœæ²¡æœ‰ï¼‰,å¤åˆ¶ä¿å­˜è‡ªå·±çš„tokenåˆ°è®°äº‹æœ¬ä¹‹ç±»<br><img src="/images/nas/duckdns.png" alt="duckdns"></p>
</li>
<li><p>æ‰“å¼€ DSM â†’ æ§åˆ¶é¢æ¿ â†’ å¤–éƒ¨è®¿é—® â†’ DDNS â†’ æ–°å¢</p>
</li>
</ol>
<p>æœåŠ¡å•†é€‰æ‹© custom</p>
<p>è¾“å…¥ï¼š<br>æœåŠ¡æä¾›å•†ï¼š: <a target="_blank" rel="noopener" href="http://www.duckdns.org/">www.duckdns.org</a><br>Query URL: <a target="_blank" rel="noopener" href="https://www.duckdns.org/update?domains=%E4%BD%A0%E7%9A%84%E5%9F%9F%E5%90%8D&token=%E4%BD%A0%E7%9A%84TOKEN&ip=__%E4%BD%A0%E7%9A%84%E5%85%AC%E7%BD%91IPv4">https://www.duckdns.org/update?domains=ä½ çš„åŸŸå&amp;token=ä½ çš„TOKEN&amp;ip=__ä½ çš„å…¬ç½‘IPv4</a>__<br>email å°±æ˜¯ä½ æ³¨å†Œduckdns ç”¨çš„email<br>password æˆ‘å°±å¤åˆ¶äº†tokenï¼Œå¥½åƒæ— æ‰€è°“<br>æµ‹è¯•ä¸€ä¸‹è¿æ¥ï¼Œåº”è¯¥æ˜¯normal å°±å¯¹äº†ã€‚</p>
<ol start="3">
<li>ç°åœ¨å°±å¯ä»¥ç”¨æ‰‹æœº5Gçš„æƒ…å†µä¸‹ç”¨åŸŸåè®¿é—®äº†ï¼š <a target="_blank" rel="noopener" href="https://frankxu.duckdns.org:5001/">https://frankxu.duckdns.org:5001</a></li>
</ol>
<h2 id="5-å¦‚ä½•ç»™åŸŸåç”³è¯·å…è´¹HTTPSè¯ä¹¦ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±æ²¡æœ‰â€œä¸å®‰å…¨è¿æ¥â€å°é”ğŸ”’äº†ã€‚"><a href="#5-å¦‚ä½•ç»™åŸŸåç”³è¯·å…è´¹HTTPSè¯ä¹¦ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±æ²¡æœ‰â€œä¸å®‰å…¨è¿æ¥â€å°é”ğŸ”’äº†ã€‚" class="headerlink" title="5. å¦‚ä½•ç»™åŸŸåç”³è¯·å…è´¹HTTPSè¯ä¹¦ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±æ²¡æœ‰â€œä¸å®‰å…¨è¿æ¥â€å°é”ğŸ”’äº†ã€‚"></a>5. å¦‚ä½•ç»™åŸŸåç”³è¯·å…è´¹HTTPSè¯ä¹¦ï¼Œè¿™æ ·åœ¨è®¿é—®çš„æ—¶å€™å°±æ²¡æœ‰â€œä¸å®‰å…¨è¿æ¥â€å°é”ğŸ”’äº†ã€‚</h2><ol>
<li><p>æ‰“å¼€ DSM â†’ æ§åˆ¶é¢æ¿ â†’ å®‰å…¨æ€§ â†’ è¯ä¹¦ (Security â†’ Certificate)<br>é€‰æ‹©â€œæ–°å¢â€<br>é€‰æ‹©ï¼šAdd a new certificate â†’ Get a certificate from Letâ€™s Encrypt</p>
</li>
<li><p>å¡«å†™å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>å¡«å†™å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>åŸŸå (Domain name)</td>
<td>frankxu.duckdns.org</td>
</tr>
<tr>
<td>é‚®ç®± (Email)</td>
<td>ä½ çš„å¸¸ç”¨é‚®ç®±</td>
</tr>
<tr>
<td>å¤‡ç”¨åŸŸå (Subject Alternative Name)</td>
<td>ç•™ç©ºå³å¯</td>
</tr>
</tbody></table>
<p>ç‚¹å‡»åº”ç”¨(Apply),å¯èƒ½éœ€è¦ç­‰ä¸€ä¸‹ï¼Œæœ€åæ˜¯è¿™æ ·çš„ï¼š<br><img src="/images/nas/%E8%AF%81%E4%B9%A6.png" alt="è¯ä¹¦"></p>
<ol start="3">
<li>æ³¨æ„ï¼šç«¯å£ 80ï¼ˆHTTPï¼‰åœ¨è·¯ç”±å™¨ä¸Šä¹Ÿè¦èƒ½è®¿é—® NASï¼Œå¦åˆ™ Letâ€™s Encrypt æ— æ³•éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚<br>æ‰€ä»¥éœ€è¦åœ¨æ— çº¿è·¯ç”±å™¨å¢åŠ 80ç«¯å£çš„è½¬å‘ï¼ˆæˆ‘çš„meminiçš„å†…ç½‘ipæ˜¯ï¼š192.168.1.29)ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>Service Name</th>
<th>External Port</th>
<th>Internal Port</th>
<th>IP</th>
<th>Protocol</th>
</tr>
</thead>
<tbody><tr>
<td>HTTP</td>
<td>80</td>
<td>80</td>
<td>192.168.1.29</td>
<td>TCP</td>
</tr>
</tbody></table>
<h2 id="6-å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®DSM-å’Œ-Synology-photoå­è·¯å¾„ï¼Œè€Œä¸è¾“å…¥ç«¯å£å·ï¼ˆæ¯”å¦‚ï¼šhttps-frankxu-duckdns-org-photo-https-frankxu-duckdns-orgï¼‰ï¼š"><a href="#6-å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®DSM-å’Œ-Synology-photoå­è·¯å¾„ï¼Œè€Œä¸è¾“å…¥ç«¯å£å·ï¼ˆæ¯”å¦‚ï¼šhttps-frankxu-duckdns-org-photo-https-frankxu-duckdns-orgï¼‰ï¼š" class="headerlink" title="6. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®DSM å’Œ Synology photoå­è·¯å¾„ï¼Œè€Œä¸è¾“å…¥ç«¯å£å·ï¼ˆæ¯”å¦‚ï¼šhttps://frankxu.duckdns.org/photo  https://frankxu.duckdns.orgï¼‰ï¼š"></a>6. å¦‚ä½•ä½¿ç”¨åŸŸåè®¿é—®DSM å’Œ Synology photoå­è·¯å¾„ï¼Œè€Œä¸è¾“å…¥ç«¯å£å·ï¼ˆæ¯”å¦‚ï¼š<a target="_blank" rel="noopener" href="https://frankxu.duckdns.org/photo">https://frankxu.duckdns.org/photo</a>  <a href="https://frankxu.duckdns.orgï¼‰ï¼š">https://frankxu.duckdns.orgï¼‰ï¼š</a></h2><blockquote>
<p>å…³äºå®‰è£…Synology photo å¥—ä»¶ï¼Œå¹¶é…ç½®ç«¯å£å·å°±å¾ˆç®€å•äº†ï¼Œä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚</p>
</blockquote>
<ol>
<li><p>åœ¨è·¯ç”±å™¨å¢åŠ  port forwardingï¼š<br>443 çš„ ç«¯å£è½¬å‘ï¼Œè½¬å‘åˆ° é›¶åˆ» meminiçš„å†…ç½‘ip<br><em><strong>åˆ æ‰ä¹‹å‰çš„5001çš„ç«¯å£è½¬å‘ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ‰“ç®—è¾“å…¥ç«¯å£äº†ã€‚</strong></em><br><em><strong>å¦‚æœä¹‹å‰é…ç½®äº†5443çš„photoç«¯å£è½¬å‘ï¼Œä¹Ÿè¦åˆ æ‰äº†ã€‚</strong></em><br><em><strong>ä¸éœ€è¦é…ç½®Httpç«¯å£çš„è½¬å‘ï¼Œå¦‚æœæˆ‘ä»¬åªä½¿ç”¨æ›´å®‰å…¨çš„Https</strong></em></p>
</li>
<li><p>åˆ°è¿™é‡Œä½ çš„è·¯ç”±å™¨çš„è½¬å‘è§„åˆ™å¤§æ¦‚æ˜¯è¿™æ ·çš„ (22ç«¯å£æ˜¯SSHï¼Œå¯ä»¥ä¸ç”¨ï¼Œ 80ç«¯å£æ˜¯è¯ä¹¦ï¼Œ 443 æ˜¯ å…ç«¯å£è¾“å…¥çš„è½¬å‘ï¼‰ï¼š<br><img src="/images/nas/portforwarding.png" alt="portforwarding"></p>
</li>
<li><p>sshåˆ°ä½ çš„memini nasä¿®æ”¹nginx.conf</p>
</li>
</ol>
<ul>
<li><p>é¦–å…ˆï¼š<br><code>sudo -i</code></p>
</li>
<li><p>å¤‡ä»½ï¼š<br><code>cp -a /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak.$(date +%F-%H%M%S)</code></p>
</li>
<li><p>ç¼–è¾‘ï¼š<br><code>vi /etc/nginx/nginx.conf</code></p>
</li>
<li><p>æ‰¾åˆ°&#x2F;listen 443 default_server ssl ä¹Ÿå°±æ˜¯ç›‘å¬ 443 çš„ server {}<br>åœ¨serveré‡Œé¢ï¼Œå…¶ä»– location ä¹‹åï¼ŒåŠ å…¥ä¸‹é¢è¿™ä¸€æ®µï¼ˆå› ä¸ºSynology Photoså¥—ä»¶çš„ç«¯å£æˆ‘è®¾ç½®çš„æ˜¯5443ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /photo &#123;</span><br><span class="line">    proxy_pass https://127.0.0.1:5443;</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_read_timeout 300;</span><br><span class="line"></span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection $connection_upgrade;</span><br><span class="line"></span><br><span class="line">    proxy_ssl_server_name on;</span><br><span class="line">    proxy_ssl_verify off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†å¦‚ä¸‹è¿™æ®µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    root /var/tmp/nginx/html;</span><br><span class="line">    add_header Cache-Control &#x27;no-cache&#x27;;</span><br><span class="line">    rewrite (.*) /redirect.html break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>æ›¿æ¢æˆå¦‚ä¸‹ï¼Œå› ä¸èƒ½æœ‰ä¸¤ä¸ªlocation &#x2F; é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">location = /redirect.html &#123;</span><br><span class="line">    root /var/tmp/nginx/html;</span><br><span class="line">    add_header Cache-Control &#x27;no-cache&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    proxy_pass https://127.0.0.1:5001;</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_read_timeout 300;</span><br><span class="line"></span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line"></span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection $connection_upgrade;</span><br><span class="line"></span><br><span class="line">    proxy_ssl_server_name on;</span><br><span class="line">    proxy_ssl_verify off;</span><br><span class="line"></span><br><span class="line">    proxy_redirect ~^https?://([^/]+):5001(/.*)$ https://$host$2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é‡å¯ngix<br><code>nginx -t &amp;&amp; nginx -s reload</code></p>
</li>
<li><p>å°†System default &#x2F; é»˜è®¤è¯ä¹¦ é€‰æ‹©æˆä½ ç”Ÿæˆçš„åŸŸåè¯ä¹¦<br><img src="/images/nas/dsm%E8%AF%81%E4%B9%A6%E9%80%89%E6%8B%A9.png" alt="é€‰æ‹©è¯ä¹¦"></p>
</li>
</ul>
<p>æœ€åï¼Œä½ ç°åœ¨å°±èƒ½ï¼š<br>https:&#x2F;&#x2F;ä½ çš„åŸŸå â†’ åº”ç›´æ¥è¿›å…¥ DSM</p>
<p>https:&#x2F;&#x2F;ä½ çš„åŸŸå&#x2F;photo â†’ Photos æ­£å¸¸</p>
<blockquote>
<p>æˆ‘æ²¡æœ‰ä½¿ç”¨DSMé‡Œé¢çš„åå‘ä»£ç†æ¥é…ç½®443 åˆ° localhost 5001 åˆ°è§„åˆ™ï¼ŒåŸå› æ˜¯ 443 å°†æ¥è¿˜è¦è¢«å…¶å®ƒå­ç±»ç”¨åˆ°ï¼Œæ¯”å¦‚audioï¼Œphotoï¼Œå¦‚æœéƒ½æƒ³ä»å…¬ç½‘443ç›´æ¥è½¬åˆ°å„è‡ªçš„ç«¯å£ï¼Œç›®å‰åœ¨åå‘ä»£ç†ä¸­åªèƒ½é…ä¸€æ¡443çš„ï¼Œç›®å‰æ— è§£ï¼Œå“ªæ€•æ˜¯ä¸åŒçš„åŸŸåã€‚</p>
</blockquote>
<h2 id="6-å¦‚ä½•é˜²æ­¢é‡å¯å-etc-nginx-nginx-conf-æ›´æ–°è¢«è¦†ç›–"><a href="#6-å¦‚ä½•é˜²æ­¢é‡å¯å-etc-nginx-nginx-conf-æ›´æ–°è¢«è¦†ç›–" class="headerlink" title="6. å¦‚ä½•é˜²æ­¢é‡å¯å&#x2F;etc&#x2F;nginx&#x2F;nginx.conf æ›´æ–°è¢«è¦†ç›–"></a>6. å¦‚ä½•é˜²æ­¢é‡å¯å&#x2F;etc&#x2F;nginx&#x2F;nginx.conf æ›´æ–°è¢«è¦†ç›–</h2><ul>
<li><p>é¦–å…ˆssh åˆ° me mini ä¸»æœº</p>
</li>
<li><p>ç„¶åï¼š</p>
</li>
</ul>
<p><code>sudo -i</code></p>
<ul>
<li><p>å…ˆå¤‡ä»½å½“å‰ç³»ç»Ÿæ–‡ä»¶ï¼ˆå¸¦æ—¶é—´æˆ³ï¼Œå¯å›æ»šï¼‰<br><code>cp -a /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak.$(date +%F-%H%M%S)</code></p>
</li>
<li><p>åˆ›å»ºæ¨¡æ¿ç›®å½•<br><code>mkdir -p /usr/local/etc</code></p>
</li>
<li><p>å¤åˆ¶ä¸€ä»½ä½œä¸ºæ¨¡æ¿ï¼ˆæˆ‘ä»¬ç­‰ä¼šç”¨å®ƒåšâ€œè‡ªä¿®å¤â€çš„æºï¼‰<br><code>cp -a /etc/nginx/nginx.conf /usr/local/etc/nginx.conf.custom</code></p>
</li>
<li><p>éªŒè¯ä¸€ä¸‹æ¨¡æ¿å·²å°±ä½<br><code>ls -l /usr/local/etc/nginx.conf.custom</code></p>
</li>
<li><p>å¼€æœºè„šæœ¬</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/usr/local/etc/rc.d/zz-restore-nginx-proxy.sh &lt;&lt;&#x27;EOF&#x27;</span><br><span class="line">#!/bin/sh</span><br><span class="line"># Restore custom nginx.conf at boot (to keep reverse-proxy rules)</span><br><span class="line"></span><br><span class="line">CONF=&quot;/etc/nginx/nginx.conf&quot;</span><br><span class="line">TEMPLATE=&quot;/usr/local/etc/nginx.conf.custom&quot;</span><br><span class="line">STAMP=&quot;$(date +%F-%H%M%S)&quot;</span><br><span class="line">BACKUP=&quot;/usr/local/etc/nginx.conf.stock.$STAMP&quot;</span><br><span class="line"></span><br><span class="line"># åªæœ‰å½“æ¨¡æ¿å­˜åœ¨æ—¶æ‰æ‰§è¡Œ</span><br><span class="line">if [ -f &quot;$TEMPLATE&quot; ]; then</span><br><span class="line">  # å¤‡ä»½å½“å‰ç”±ç³»ç»Ÿç”Ÿæˆçš„ nginx.conf</span><br><span class="line">  cp -a &quot;$CONF&quot; &quot;$BACKUP&quot;</span><br><span class="line"></span><br><span class="line">  # è¦†ç›–ä¸ºæˆ‘ä»¬çš„æ¨¡æ¿ç‰ˆæœ¬</span><br><span class="line">  cp -a &quot;$TEMPLATE&quot; &quot;$CONF&quot;</span><br><span class="line"></span><br><span class="line">  # éªŒè¯å¹¶é‡è½½ï¼›å¤±è´¥åˆ™å›æ»šé¿å…æœåŠ¡ä¸å¯ç”¨</span><br><span class="line">  if nginx -t; then</span><br><span class="line">    nginx -s reload</span><br><span class="line">  else</span><br><span class="line">    echo &quot;[restore-nginx] custom conf failed test, rolling back&quot;</span><br><span class="line">    cp -a &quot;$BACKUP&quot; &quot;$CONF&quot;</span><br><span class="line">    nginx -t &amp;&amp; nginx -s reload</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">exit 0</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li><p>èµ‹äºˆå¯æ‰§è¡Œæƒé™<br><code>chmod +x /usr/local/etc/rc.d/zz-restore-nginx-proxy.sh</code></p>
</li>
<li><p>ç«‹å³æ‰‹åŠ¨æµ‹è¯•ä¸€æ¬¡è„šæœ¬ï¼ˆä¸å¿…é‡å¯ï¼‰<br><code>/usr/local/etc/rc.d/zz-restore-nginx-proxy.sh</code></p>
</li>
<li><p>å¦‚æœä½ çš„é…ç½®å› ä¸ºé‡å¯ä¸¢äº†ï¼Œè¯·å…ˆå®‰è£… 5 ä¿®æ”¹&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</p>
</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li><p>Audio Station</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /audio &#123;</span><br><span class="line">    proxy_pass https://127.0.0.1:8801;</span><br><span class="line">    proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_ssl_verify off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æŠŠâ€œç°åœ¨è¿™ä»½å¯ç”¨çš„é…ç½®nginx.confâ€æ›´æ–°ä¸ºæ¨¡æ¿ï¼ˆ<strong>éå¸¸é‡è¦</strong>ï¼‰<br><code>cp -a /etc/nginx/nginx.conf /usr/local/etc/nginx.conf.custom</code></p>
</li>
<li><p>æ‰‹åŠ¨è·‘ä¸€æ¬¡è„šæœ¬éªŒè¯è¦†ç›–ä¸é‡è½½æµç¨‹æ²¡é—®é¢˜<br><code>/usr/local/etc/rc.d/zz-restore-nginx-proxy.sh</code></p>
</li>
<li><p>ï¼ˆå¯é€‰ï¼‰é‡å¯åšæŒä¹…æ€§éªŒè¯ï¼šå¼€æœºåä¸¤ä¸ªåœ°å€ä»æ­£å¸¸ï¼Œè¯´æ˜ä»¥åå°±ä¸ä¼šâ€œä¸¢é…ç½®â€äº†ã€‚</p>
</li>
</ul>
<h2 id="6-ä½†æ˜¯åœ¨æ‰‹æœºapp-DS-audio-é‡Œé¢é…ç½®çš„æ—¶å€™æ˜¯ä¸æ”¯æŒ-å…¬ç½‘åŸŸå-audio-è¿™ç§æ–¹å¼æ»´"><a href="#6-ä½†æ˜¯åœ¨æ‰‹æœºapp-DS-audio-é‡Œé¢é…ç½®çš„æ—¶å€™æ˜¯ä¸æ”¯æŒ-å…¬ç½‘åŸŸå-audio-è¿™ç§æ–¹å¼æ»´" class="headerlink" title="6. ä½†æ˜¯åœ¨æ‰‹æœºapp DS audio é‡Œé¢é…ç½®çš„æ—¶å€™æ˜¯ä¸æ”¯æŒ å…¬ç½‘åŸŸå&#x2F;audio è¿™ç§æ–¹å¼æ»´"></a>6. ä½†æ˜¯åœ¨æ‰‹æœºapp DS audio é‡Œé¢é…ç½®çš„æ—¶å€™æ˜¯ä¸æ”¯æŒ å…¬ç½‘åŸŸå&#x2F;audio è¿™ç§æ–¹å¼æ»´</h2><blockquote>
<p>è§£å†³æ–¹æ¡ˆæ˜¯å†ç”³è¯·ä¸€ä¸ªåŸŸåfrankxu-audio</p>
</blockquote>
<ul>
<li>åœ¨â€œè‡ªå®šä¹‰ DDNS æœåŠ¡æä¾›å•†â€å†å»ºä¸€ä¸ªæ–°æ¡ç›®ï¼Œåå­—æ¢æˆ DuckDNS-2ï¼ˆæˆ–ä»»æ„ï¼‰</li>
</ul>
<p>æŠŠ Query URL æ”¹æˆï¼ˆå®Œå…¨ç…§æŠ„ï¼‰ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.duckdns.org/update?domains=__HOSTNAME__&token=__PASSWORD__&ip=__MYIP">https://www.duckdns.org/update?domains=__HOSTNAME__&amp;token=__PASSWORD__&amp;ip=__MYIP</a>__</p>
<ul>
<li>ç„¶å æ–°å¢ä¸€æ¡ DDNS è®°å½•ï¼š</li>
</ul>
<p>Service Providerï¼šä½ åˆšæ‰ä¿å­˜çš„ DuckDNS-2</p>
<p>Hostnameï¼šfrankxu-audio</p>
<p>é‚®ç®±ï¼šä½ çš„é‚®ç®±</p>
<p>Password&#x2F;Keyï¼šå¡«ä½ çš„ DuckDNS token</p>
<p>ç¡®å®šå Test Connection åº”è¯¥æ˜¾ç¤º Normal</p>
<p>ï¼ˆä¿ç•™ä½ åŸæ¥çš„ frankxu é‚£æ¡ï¼›ä¸¤ä¸ªåŸŸåéƒ½èƒ½è‡ªåŠ¨æ›´æ–°ï¼‰</p>
<ul>
<li>DSM åå‘ä»£ç†ä¸º Audio Station å»ºè§„åˆ™</li>
</ul>
<p>æ§åˆ¶é¢æ¿ â†’ ç™»å½•é—¨æˆ· â†’ åå‘ä»£ç† â†’ åˆ›å»º</p>
<p>æ¥æº (Source)</p>
<p>Protocolï¼šHTTPS</p>
<p>Hostnameï¼šfrankxu-audio.duckdns.org</p>
<p>Portï¼š443</p>
<p>ç›®çš„åœ° (Destination)</p>
<p>Protocolï¼šHTTPS</p>
<p>Hostnameï¼šlocalhost</p>
<p>Portï¼š8801</p>
<p>ä¿å­˜</p>
<ul>
<li>ç”³è¯·å¹¶åˆ†é…è¯ä¹¦</li>
</ul>
<p>æ§åˆ¶é¢æ¿ â†’ å®‰å…¨æ€§ â†’ è¯ä¹¦</p>
<p>æ–°å¢ â†’ Get a certificate from Letâ€™s Encrypt</p>
<p>åŸŸåï¼šmicroxu-audio.duckdns.org</p>
<p>é‚®ç®±ä»»å¡«</p>
<p>æˆåŠŸåï¼Œç‚¹ è®¾ç½® â†’ æŠŠ frankxu-audio.duckdns.org <strong>è¿™å¼ è¯ä¹¦æŒ‡æ´¾ç»™åˆšæ‰çš„åå‘ä»£ç†è§„åˆ™</strong><br><img src="/images/nas/%E8%AF%81%E4%B9%A6%E5%92%8C%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99.png" alt="é€‰æ‹©audioè½¬å‘åŸŸåè¯ä¹¦"></p>
<p>è·¯ç”±å™¨ç«¯å£è½¬å‘ä¿æŒï¼š443â†’NASï¼ˆä»¥åŠ 80â†’NAS ä¾¿äº LE ç»­æœŸï¼‰ã€‚ä¸ç”¨å¼€æ”¾ 8801ã€‚</p>
<ul>
<li>DS audio å¡«å†™æ–¹å¼</li>
</ul>
<p>æœåŠ¡å™¨ï¼šfrankxu-audio.duckdns.org:443</p>
<p>å‹¾é€‰ HTTPS</p>
<p>è´¦å·&#x2F;å¯†ç ï¼šä½ çš„ DSM è´¦æˆ·</p>
<p><strong>å¥½äº†ï¼Œç°åœ¨è·Ÿç™½ç¾¤æ™–æ²¡æœ‰åŒºåˆ«ï¼Œå¼€å§‹ä½ çš„è¡¨æ¼”å§â€¦â€¦</strong></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/paypal8.png" alt="Frank Xu PayPal">
        <span>PayPal</span>
      </div>

  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/02/10/The-south-island/" rel="prev" title="The south island">
                  <i class="fa fa-angle-left"></i> The south island
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/12/27/My-Boehm-Collection/" rel="next" title="My Boehm Collection">
                  My Boehm Collection <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Frank Xu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
